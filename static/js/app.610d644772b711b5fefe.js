webpackJsonp([1],{"1kwl":function(t,e){},"7w5l":function(t,e){},"8+/N":function(t,e){},FlUD:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("7+uW"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[t._m(0),t._v(" "),a("nav",[a("ul",[a("li",[a("router-link",{staticClass:"home-link",attrs:{to:"/"}},[t._v("Accueil")])],1),t._v(" "),a("li",[a("router-link",{staticClass:"overview-link",attrs:{to:"/overview"}},[t._v("Vue globale")])],1),t._v(" "),a("li",[a("router-link",{staticClass:"multiple-maps-link",attrs:{to:"/multiple-maps"}},[t._v("Vue horaire")])],1),t._v(" "),a("li",[a("router-link",{staticClass:"dataset-link",attrs:{to:"/dataset"}},[t._v("Jeu de données")])],1),t._v(" "),a("li",[a("router-link",{staticClass:"about-link",attrs:{to:"/about"}},[t._v("À propos")])],1)])]),t._v(" "),a("div",{staticClass:"menu-dropdown"},[a("button",{staticClass:"menu-button",on:{click:t.displayMenu}},[a("i",{staticClass:"fa fa-bars fa-2x"})]),t._v(" "),t.dropdownMenuDisplayed?a("div",{staticClass:"menu-content"},[a("router-link",{staticClass:"home-link",attrs:{to:"/"}},[t._v("Accueil")]),t._v(" "),a("router-link",{staticClass:"overview-link",attrs:{to:"/overview"}},[t._v("Vue globale")]),t._v(" "),a("router-link",{staticClass:"multiple-maps-link",attrs:{to:"/multiple-maps"}},[t._v("Vue horaire")]),t._v(" "),a("router-link",{staticClass:"dataset-link",attrs:{to:"/dataset"}},[t._v("Jeu de données")]),t._v(" "),a("router-link",{staticClass:"about-link",attrs:{to:"/about"}},[t._v("À propos")])],1):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:"static/img/de_la_concorde.jpg"}}),this._v(" "),e("span",[this._v("Achalandage dans le métro de Montréal")])])}]};var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("p",[this._v(" "+this._s(this.formatAuthors()+" © "+this.creationYear))])])},staticRenderFns:[]};var s={name:"app",components:{"header-view":a("VU/8")({name:"Header",data:function(){return{dropdownMenuDisplayed:!1,navDisplayed:!0}},methods:{displayMenu:function(){this.dropdownMenuDisplayed=!this.dropdownMenuDisplayed}}},n,!1,function(t){a("7w5l")},"data-v-97c334dc",null).exports,"footer-view":a("VU/8")({name:"Footer",data:function(){return{authors:[{firstName:"Kahina",lastName:"Bechiri"},{firstName:"Jean-Philippe",lastName:"Corbeil"}],creationYear:2018}},methods:{formatAuthors:function(){return this.authors.map(function(t){return t.firstName+" "+t.lastName}).join(" & ")}}},i,!1,function(t){a("SO/L")},"data-v-3a789120",null).exports}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("header-view"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var l=a("VU/8")(s,o,!1,function(t){a("FlUD")},null,null).exports,c=a("/ocq"),u=a("woOf"),p=a.n(u),d=a("vwbq"),m=a("kW7t"),f=a("mvUh"),v=a("7rLc"),h=(a("YBzI"),a("V0Ox")),y=a("Q1TF"),_=(a("9j4o"),200);function M(){return function(){var t=0,e=0,a=[0,10],r=100,n=!0,i="M-5.5,-5.5v10l6,5.5l6,-5.5v-10z",s=null,o=null,l=null,c=null,u=null,p=Object(v.a)("onchange","start","end","drag"),d=null,g=null,M=null;function x(e){d=e.selection?e.selection():e,g=(g=a[0]instanceof Date?Object(y.v)():Object(y.l)()).domain(a).range([0,r]).clamp(!0),M=Object(y.l)().range(g.range()).domain(g.range()).clamp(!0),c=c||g.tickFormat(),d.selectAll(".axis").data([null]).enter().append("g").attr("transform","translate(0,7)").attr("class","axis");var s=d.selectAll(".slider").data([null]),l=s.enter().append("g").attr("class","slider").attr("transform","translate(0,0)");l.append("line").attr("class","track").attr("x1",0).attr("y1",0).attr("y2",0).attr("stroke","#bbb").attr("stroke-width",6).attr("stroke-linecap","round"),l.append("line").attr("class","track-inset").attr("x1",0).attr("y1",0).attr("y2",0).attr("stroke","#eee").attr("stroke-width",4).attr("stroke-linecap","round"),l.append("line").attr("class","track-overlay").attr("x1",0).attr("y1",0).attr("y2",0).attr("stroke","transparent").attr("stroke-width",40).attr("stroke-linecap","round").merge(s.select(".track-overlay"));var p=l.append("g").attr("class","parameter-value").attr("transform","translate("+g(t)+",0)").attr("font-family","sans-serif").attr("text-anchor","middle");p.append("path").attr("d",i).attr("fill","white").attr("stroke","#777"),n&&p.append("text").attr("font-size",10).attr("y",27).attr("dy",".71em").text(c(t)),e.select(".track").attr("x2",g.range()[1]),e.select(".track-inset").attr("x2",g.range()[1]),e.select(".track-overlay").attr("x2",g.range()[1]),e.select(".axis").call(Object(f.a)(g).tickFormat(c).ticks(u).tickValues(o)),d.select(".axis").select(".domain").remove(),e.select(".axis").attr("transform","translate(0,7)"),e.selectAll(".axis text").attr("fill","#aaa").attr("y",20).attr("dy",".71em").attr("text-anchor","middle"),e.selectAll(".axis line").attr("stroke","#aaa"),e.select(".parameter-value").attr("transform","translate("+g(t)+",0)"),C()}function C(){if(n){var e=[];d.selectAll(".axis .tick").each(function(a){e.push(Math.abs(a-t))});var a=Object(m.t)(e);d.selectAll(".axis .tick text").attr("opacity",function(t,e){return e===a?0:1})}}function w(t){if(s){var e=(t-a[0])%s,r=t-e;return 2*e>s&&(r+=s),t instanceof Date?new Date(r):r}if(l){var n=Object(m.t)(l.map(function(e){return Math.abs(t-e)}));return l[n]}return t}function k(e){t!==e&&(t=e,p.call("onchange",x,e),C())}function b(t,e){e=void 0!==e&&e;var a=d.select(".parameter-value");e&&(a=a.transition().ease(h.G).duration(_)),a.attr("transform","translate("+g(t)+",0)"),n&&d.select(".parameter-value text").text(c(t))}return x.min=function(t){return arguments.length?(a[0]=t,x):a[0]},x.max=function(t){return arguments.length?(a[1]=t,x):a[1]},x.domain=function(t){return arguments.length?(a=t,x):a},x.width=function(t){return arguments.length?(r=t,x):r},x.tickFormat=function(t){return arguments.length?(c=t,x):c},x.ticks=function(t){return arguments.length?(u=t,x):u},x.value=function(e){if(!arguments.length)return t;var a=M(g(e)),r=w(g.invert(a));return b(r,!0),k(r),x},x.default=function(a){return arguments.length?(e=a,t=a,x):e},x.step=function(t){return arguments.length?(s=t,x):s},x.tickValues=function(t){return arguments.length?(o=t,x):o},x.marks=function(t){return arguments.length?(l=t,x):l},x.handle=function(t){return arguments.length?(i=t,x):i},x.displayValue=function(t){return arguments.length?(n=t,x):n},x.on=function(){var t=p.on.apply(p,arguments);return t===p?x:t},x}()}a("rdLu");var x=a("vHc0"),C={name:"Legend",data:function(){return{}},mounted:function(){this.displayLegend()},methods:{displayLegend:function(){var t=[25,50,75,100],e=[0,100],a=this.$refs.legend.offsetWidth,r=this.$refs.legend.offsetHeight,n=d.scaleSqrt().domain(t).range([10,25]),i=d.select(".legend").append("svg").attr("class","legend-svg").attr("width",a).attr("height",r).append("g").attr("class","legend-wrap").attr("transform","translate(0,"+n(d.max(t))+")");i.append("g").attr("class","values-wrap").selectAll("circle").data(t).enter().append("circle").attr("class",function(t){return"values values-"+t}).attr("r",function(t){return n(t)}).attr("cx",a/3).attr("cy",function(t){return r/2-n(t)}).style("fill","none").style("stroke","gray").style("stroke-dasharray","2,2"),i.append("g").attr("class","values-line-wrap").selectAll(".values-labels").data(t).enter().append("line").attr("x1",function(t){return a/3+n(t)/3}).attr("x2",a/3+n(e[1])+30).attr("y1",function(t){return r/2-2*n(t)}).attr("y2",function(t){return r/2-2*n(t)}).style("stroke","gray").style("stroke-dasharray","0.8"),i.append("g").attr("class","values-labels-wrap").selectAll(".values-labels").data(t).enter().append("text").attr("x",a/3+n(e[1])+60).attr("y",function(t){return r/2-2*n(t)+5}).attr("shape-rendering","crispEdges").style("text-anchor","end").style("fill","gray").style("font-size","12px").text(function(t){return t+"%"})}}},w={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"legend",staticClass:"legend"})},staticRenderFns:[]};var k=a("VU/8")(C,w,!1,function(t){a("sV89")},"data-v-5bb6e3ae",null).exports,b={name:"Home",components:{"legend-view":k},data:function(){return{days:[{name:"Monday",value:0},{name:"Tuesday",value:1},{name:"Wednesday",value:2},{name:"Thursday",value:3},{name:"Friday",value:4},{name:"Saturday",value:5},{name:"Sunday",value:6}],hours:[{name:"00:00 AM",value:0},{name:"01:00 AM",value:1},{name:"02:00 AM",value:2},{name:"03:00 AM",value:3},{name:"04:00 AM",value:4},{name:"05:00 AM",value:5},{name:"06:00 AM",value:6},{name:"07:00 AM",value:7},{name:"08:00 AM",value:8},{name:"09:00 AM",value:9},{name:"10:00 AM",value:10},{name:"11:00 AM",value:11},{name:"00:00 PM",value:12},{name:"01:00 PM",value:13},{name:"02:00 PM",value:14},{name:"03:00 PM",value:15},{name:"04:00 PM",value:16},{name:"05:00 PM",value:17},{name:"06:00 PM",value:18},{name:"07:00 PM",value:19},{name:"08:00 PM",value:20},{name:"09:00 PM",value:21},{name:"10:00 PM",value:22},{name:"11:00 PM",value:23}],animationState:1,startDay:0,startHour:0,endDay:6,endHour:23,minSpeedMultiplier:.5,maxSpeedMultiplier:2,currentSpeedMultiplier:1,currentSpeed:1e3,currentDay:0,currentHour:0,timer:"",panelIsHidden:!1,mtlMapData:[],initializePopularTimesCercles:!1,stations:[],zoom:null,handle:null,mySlider:null,minZoom:2,maxZoom:8,currentZoom:2,stationRadius:3,projection:d.geoMercator(),scaleR:d.scaleLinear().domain([0,100]).range([5,40]),color:d.scaleOrdinal().domain(["Orange","Green","Blue","Yellow"]).range(["orange","green","blue","yellow"])}},mounted:function(){this.init()},methods:{init:function(){d.queue().defer(d.json,"static/data/montreal-laval-long-t.json").defer(d.json,"static/data/stations.geojson").defer(d.json,"static/data/popularTime.json").await(this.processData)},processData:function(t,e,a,r){if(t)throw t;this.mtlMapData=e,this.stations=a;var n=this.filterData(r,a.features.map(function(t){return t.properties.place_id}));a.features=a.features.map(function(t){var e=n.find(function(e){return e.id===t.properties.place_id}),a=t.properties.name;return t.properties=p()({},t.properties,e),t.properties.name=String(a),t});var i=x.a(this.mtlMapData,this.mtlMapData.objects.greaterMtl),s=(i.features.filter(function(t){return!0===t.properties.center})[0],this.$refs.mapWrapper.offsetWidth),o=this.$refs.mapWrapper.offsetHeight,l=d.geoPath().projection(this.projection);this.projection.translate([0,0]).scale(1);var c=l.bounds(i),u=.95/Math.max((c[1][0]-c[0][0])/s,(c[1][1]-c[0][1])/o),m=[(s-u*(c[1][0]+c[0][0]))/2,(o-u*(c[1][1]+c[0][1]))/2];this.projection.scale(u).translate(m),this.displayMtlMap(l),this.displayMtlSubwayStations(a)},displayMtlMap:function(t){var e=this,a=this.$refs.mapWrapper.offsetWidth,r=this.$refs.mapWrapper.offsetHeight,n=d.select(".map-wrapper").append("svg").attr("width","100%").attr("height","100%"),i=n.append("g").style("stroke-width","1.5px");this.zoom=d.zoom().scaleExtent([this.minZoom,this.maxZoom]).translateExtent([[0,0],[a,r]]).on("zoom",function(){e.currentZoom=d.event.transform.k,i.attr("transform",d.event.transform),e.updateStationsByTime(self.currentSpeed),i.selectAll(".station").attr("r",function(t){return e.stationRadius/e.currentZoom})}),n.call(this.zoom),n.transition().duration(1e3).call(this.zoom.transform,d.zoomIdentity.translate(-a*this.minZoom/(this.minZoom+1),-r*this.minZoom/(this.minZoom+1)).scale(this.minZoom));var s=x.a(this.mtlMapData,this.mtlMapData.objects.greaterMtl);s.features.filter(function(t){return!0===t.properties.center})[0];i.append("path").datum(s).attr("class","feature").attr("d",t).style("fill","#b3b3b31a"),this.createSlider(n,a,r)},createSlider:function(t,e,a){var r=this;r.mySlider=M().min(0).max(24*r.days.length-1).displayValue(!1).step(1).width(750).ticks(24*r.days.length-1).tickFormat(function(t){return r.days[Math.floor(t/24)].name});var n=t.append("g").call(r.mySlider);n.selectAll(".tick").select("line").attr("y2",function(t){return t%24==0?18:t%12==0?12:6}),n.selectAll(".tick").select("text").attr("opacity",function(t,e){return e%24==0?1:0}).attr("fill",function(t,e){return 0===e?"#000":"#aaa"}),r.mySlider.on("onchange",function(t){n.selectAll(".tick").select("text").attr("fill",function(e,a){return a%24==0&&Math.floor(a/24)===Math.floor(t/24)?"#000":"#aaa"})}),r.mySlider.on("drag",function(t){n.selectAll(".tick").select("text").attr("fill",function(e,a){return a%24==0&&Math.floor(a/24)===Math.floor(t/24)?"#000":"#aaa"}),r.currentDay=Math.floor(t/24),r.currentHour=Math.floor(t%24),r.startDay=r.currentDay,r.startHour=r.currentHour,2==r.animationState&&r.pauseEvent()});var i=d.select(".slider").node().getBBox();n.attr("transform","translate("+(e-i.width)/2+",50)")},updateStationsByTime:function(t){var e=this;d.select(".map-wrapper").select("svg").select("g").selectAll(".station-data").transition().duration(t).attr("r",function(t){var a=t.properties.populartimes.filter(function(t){return t.name===e.days[e.currentDay].name})[0];return e.scaleR(a.data[e.currentHour])/e.currentZoom})},displayMtlSubwayStations:function(t){var e=this;t.features=t.features.map(function(t){var a=e.projection([t.properties.coordinates.lng,t.properties.coordinates.lat]);return t.properties.x=t.properties.cx=a[0],t.properties.y=t.properties.cy=a[1],t}),d.select(".map-wrapper").select("svg").select("g").selectAll(".station").data(t.features).enter().append("circle").attr("class","station").attr("r",function(t){return e.stationRadius/e.currentZoom}).attr("transform",function(t){return"translate("+t.properties.cx+", "+t.properties.cy+")"}).attr("fill",function(t){return 1==t.properties.lines.length?e.color(t.properties.lines[0]):"black"}).attr("opacity",.75)},displayCercle:function(t){var e=this;t.features=t.features.map(function(t){var a=e.projection([t.properties.coordinates.lng,t.properties.coordinates.lat]);return t.properties.x=t.properties.cx=a[0],t.properties.y=t.properties.cy=a[1],t}),d.select(".map-wrapper").select("svg").select("g").selectAll("station-data").data(t.features).enter().append("circle").attr("class","station-data").attr("r",function(t){return e.stationRadius/e.currentZoom}).attr("transform",function(t){return"translate("+t.properties.cx+", "+t.properties.cy+")"}).attr("fill",function(t){return 1==t.properties.lines.length?e.color(t.properties.lines[0]):"black"}).attr("opacity",.15).on("mouseover",this.showToolTip).on("mouseout",function(){d.select("#tooltip").classed("hidden",!0)})},showToolTip:function(t){var e=this,a=t.properties.populartimes.filter(function(t){return t.name===e.days[e.currentDay].name})[0];d.select("#tooltip").style("left",d.event.pageX+"px").style("top",d.event.pageY+"px").html(function(){var r="black";return 1==t.properties.lines.length&&(r=e.color(t.properties.lines[0])),'<span> <span style="color:'+r+'"> &#9673; </span> <span><strong>'+t.properties.name+": </strong>"+a.data[e.currentHour]+"%</span></span>"}),d.select("#tooltip").classed("hidden",!1)},removeCercles:function(){d.select(".map-wrapper").select("svg").select("g").selectAll(".station-data").remove()},animate:function(){var t=this;t.currentSpeed,d.select(".map-wrapper").select("svg").select("g").selectAll(".station-data");t.updateStationsByTime(t.currentSpeed),t.mySlider.value(24*t.currentDay+t.currentHour),this.timer=setInterval(function(){var e=t.currentHour+1>=24?t.currentDay+1:t.currentDay,a=t.currentHour+1>=24?0:t.currentHour+1;e>t.endDay?clearInterval(t.timer):e===t.endDay&&a>t.endHour?clearInterval(t.timer):(t.currentDay=e,t.currentHour=a),t.updateStationsByTime(t.currentSpeed),t.mySlider.value(24*t.currentDay+t.currentHour)},t.currentSpeed)},zoomIn:function(){var t=d.select(".map-wrapper").select("svg").transition().duration(350);this.currentZoom<this.maxZoom&&(this.currentZoom=1.5*this.currentZoom,this.zoom.scaleTo(t,this.currentZoom))},zoomOut:function(){var t=d.select(".map-wrapper").select("svg").transition().duration(350);this.currentZoom>0&&(this.currentZoom=this.currentZoom/1.5,this.zoom.scaleTo(t,this.currentZoom))},filterData:function(t,e){return t.filter(function(t){return e.findIndex(function(e){return e===t.id})>=0})},stopEvent:function(t){this.animationState=1,this.currentDay=this.startDay,this.currentHour=this.startHour,this.initializePopularTimesCercles=!1,clearInterval(this.timer),this.removeCercles(),this.mySlider.value(24*this.currentDay+this.currentHour)},pauseEvent:function(t){this.animationState=3,clearInterval(this.timer)},backwardEvent:function(t){this.currentSpeedMultiplier>this.minSpeedMultiplier&&(this.currentSpeedMultiplier=+(this.currentSpeedMultiplier-.1).toFixed(12),this.currentSpeed=parseInt(1e3/this.currentSpeedMultiplier)),2===this.animationState&&(clearInterval(this.timer),this.animate())},playEvent:function(t){this.animationState=2,this.initializePopularTimesCercles||(this.initializePopularTimesCercles=!0,this.displayCercle(this.stations)),this.animate()},forwardEvent:function(t){this.currentSpeedMultiplier<this.maxSpeedMultiplier&&(this.currentSpeedMultiplier=+(this.currentSpeedMultiplier+.1).toFixed(12),this.currentSpeed=parseInt(1e3/this.currentSpeedMultiplier)),2===this.animationState&&(clearInterval(this.timer),this.animate())},startDayChanged:function(t){this.currentDay=t.target.value,this.mySlider.value(24*this.currentDay+this.currentHour)},startHourChanged:function(t){this.currentHour=t.target.value,this.mySlider.value(24*this.currentDay+this.currentHour)},endDayChanged:function(t){},endHourChanged:function(t){}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"home-wrapper"},[a("nav",{class:{hidden:t.panelIsHidden},attrs:{id:"sidebar"}},[a("div",{staticClass:"input-params"},[a("div",{staticClass:"range-day"},[a("div",{staticClass:"range-start"},[a("label",[t._v("De")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.startDay,expression:"startDay"}],staticClass:"form-control",attrs:{id:"start-day",disabled:1!=t.animationState},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.startDay=e.target.multiple?a:a[0]},t.startDayChanged]}},t._l(t.days,function(e){return a("option",{domProps:{value:e.value}},[t._v("\n              "+t._s(e.name)+"\n            ")])}))]),t._v(" "),a("div",{staticClass:"range-end"},[a("label",[t._v("À")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.endDay,expression:"endDay"}],staticClass:"form-control",attrs:{id:"end-day",disabled:1!=t.animationState},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.endDay=e.target.multiple?a:a[0]},t.endDayChanged]}},t._l(t.days,function(e){return a("option",{domProps:{value:e.value}},[t._v("\n              "+t._s(e.name)+"\n            ")])}))])]),t._v(" "),a("div",{staticClass:"range-time"},[a("div",{staticClass:"range-start"},[a("label",[t._v("De")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.startHour,expression:"startHour"}],staticClass:"form-control",attrs:{id:"start-time",disabled:1!=t.animationState},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.startHour=e.target.multiple?a:a[0]},t.startHourChanged]}},t._l(t.hours,function(e){return a("option",{domProps:{value:e.value}},[t._v("\n              "+t._s(e.name)+"\n            ")])}))]),t._v(" "),a("div",{staticClass:"range-end"},[a("label",[t._v("À")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.endHour,expression:"endHour"}],staticClass:"form-control",attrs:{id:"end-time",disabled:1!=t.animationState},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.endHour=e.target.multiple?a:a[0]},t.endHourChanged]}},t._l(t.hours,function(e){return a("option",{domProps:{value:e.value}},[t._v("\n              "+t._s(e.name)+"\n            ")])}))])])]),t._v(" "),a("hr",{staticClass:"separator"}),t._v(" "),a("div",{staticClass:"controls"},[a("button",{staticClass:"stop",class:{enabled:1!=t.animationState},attrs:{disabled:1===t.animationState},on:{click:t.stopEvent}},[t._m(0)]),t._v(" "),a("button",{staticClass:"backward",class:{disabled:t.currentSpeedMultiplier===t.minSpeedMultiplier},attrs:{disabled:t.currentSpeedMultiplier===t.minSpeedMultiplier},on:{click:t.backwardEvent}},[t._m(1)]),t._v(" "),2!=t.animationState?a("button",{staticClass:"play",on:{click:t.playEvent}},[t._m(2)]):t._e(),t._v(" "),2===t.animationState?a("button",{staticClass:"pause",on:{click:t.pauseEvent}},[t._m(3)]):t._e(),t._v(" "),a("button",{staticClass:"forward",class:{disabled:t.currentSpeedMultiplier===t.maxSpeedMultiplier},attrs:{disabled:t.currentSpeedMultiplier===t.maxSpeedMultiplier},on:{click:t.forwardEvent}},[t._m(4)]),t._v(" "),a("span",{staticClass:"speed"},[t._v(" "+t._s(t.currentSpeedMultiplier)+"x")])]),t._v(" "),a("div",{staticClass:"legend-wrapper"},[a("div",[t._v("Les cercles sont proportionnels au taux de fréquentation")]),t._v(" "),a("legend-view")],1)]),t._v(" "),a("div",{attrs:{id:"content"}},[a("div",{staticClass:"map-controls"},[a("div",{attrs:{id:"sidebarCollapse"},on:{click:function(e){t.panelIsHidden=!t.panelIsHidden}}},[a("span",[t.panelIsHidden?t._e():a("i",{staticClass:"fa fa-angle-double-left fa-3x"})]),t._v(" "),a("span",[t.panelIsHidden?a("i",{staticClass:"fa fa-angle-double-right fa-3x"}):t._e()])]),t._v(" "),a("div",{staticClass:"zoom"},[a("div",{staticClass:"zoom-in",on:{click:t.zoomIn}},[t._m(5)]),t._v(" "),a("div",{staticClass:"zoom-out",on:{click:t.zoomOut}},[t._m(6)])])]),t._v(" "),a("div",{staticClass:"current-time"},[t._v(" "+t._s(t.days[t.currentDay].name)+", "+t._s(t.hours[t.currentHour].name))]),t._v(" "),a("div",{ref:"mapWrapper",staticClass:"map-wrapper"}),t._v(" "),a("div",{staticClass:"hidden",attrs:{id:"tooltip"}})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fa fa-stop"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fa fa-backward"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fa fa-play"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fa fa-pause"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fa fa-forward"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fa fa-plus-square fa-2x"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fa fa-minus-square fa-2x"})])}]};var A=a("VU/8")(b,S,!1,function(t){a("8+/N")},null,null).exports,H={name:"MultipleMaps",components:{"legend-view":k},data:function(){return{panelIsHidden:!1,days:[{name:"Monday",value:0},{name:"Tuesday",value:1},{name:"Wednesday",value:2},{name:"Thursday",value:3},{name:"Friday",value:4},{name:"Saturday",value:5},{name:"Sunday",value:6}],hours:[{name:"00:00 AM",value:0},{name:"01:00 AM",value:1},{name:"02:00 AM",value:2},{name:"03:00 AM",value:3},{name:"04:00 AM",value:4},{name:"05:00 AM",value:5},{name:"06:00 AM",value:6},{name:"07:00 AM",value:7},{name:"08:00 AM",value:8},{name:"09:00 AM",value:9},{name:"10:00 AM",value:10},{name:"11:00 AM",value:11},{name:"00:00 PM",value:12},{name:"01:00 PM",value:13},{name:"02:00 PM",value:14},{name:"03:00 PM",value:15},{name:"04:00 PM",value:16},{name:"05:00 PM",value:17},{name:"06:00 PM",value:18},{name:"07:00 PM",value:19},{name:"08:00 PM",value:20},{name:"09:00 PM",value:21},{name:"10:00 PM",value:22},{name:"11:00 PM",value:23}],day:0,startHour:7,endHour:18,mapWidth:350,mapHeight:350,mtlMapData:[],stations:[],projection:d.geoMercator(),scaleR:d.scaleLinear().domain([0,100]).range([0,10]),color:d.scaleOrdinal().domain(["Orange","Green","Blue","Yellow"]).range(["orange","green","blue","yellow"]),zoom:null,minZoom:2,maxZoom:8,currentZoom:2}},mounted:function(){this.init()},methods:{init:function(){d.queue().defer(d.json,"static/data/montreal-laval-long-t.json").defer(d.json,"static/data/stations.geojson").defer(d.json,"static/data/popularTime.json").await(this.processData)},processData:function(t,e,a,r){if(t)throw t;this.mtlMapData=e,this.stations=a;var n=this.filterData(r,a.features.map(function(t){return t.properties.place_id}));this.stations.features=this.stations.features.map(function(t){var e=n.find(function(e){return e.id===t.properties.place_id}),a=t.properties.name;return t.properties=p()({},t.properties,e),t.properties.name=String(a),t}),this.displayMaps()},filterData:function(t,e){return t.filter(function(t){return e.findIndex(function(e){return e===t.id})>=0})},displayMaps:function(){var t,e=d.select(".maps-wrapper");for(t=this.startHour;t<=this.endHour;t++){var a="map_"+String(this.startHour+t);e.append("div").attr("class","map").attr("id",a).style({width:this.mapWidth+"px",height:this.mapHeight+"px"});this.createMap(a,this.mapWidth,this.mapHeight,t)}},initializeZoom:function(){var t=this;d.selectAll(".svg-map-wrapper").each(function(e,a){t.createZoom(this)})},createZoom:function(t){var e=this,a=this.$refs.mapsWrapper.offsetWidth,r=this.$refs.mapsWrapper.offsetHeight;this.zoom=d.zoom().scaleExtent([this.minZoom,this.maxZoom]).translateExtent([[0,0],[a,r]]).on("zoom",function(){e.currentZoom=d.event.transform.k,g.attr("transform",d.event.transform),g.selectAll(".station-data").attr("r",function(t){var a=t.properties.populartimes.filter(function(t){return t.name===e.days[e.currentDay].name})[0];return e.scaleR(a.data[e.currentHour])/e.currentZoom}),g.selectAll(".station").attr("r",function(t){return e.stationRadius/e.currentZoom})}),t.call(this.zoom),t.transition().duration(1e3).call(this.zoom.transform,d.zoomIdentity.translate(-a*this.minZoom/(this.minZoom+1),-r*this.minZoom/(this.minZoom+1)).scale(this.minZoom))},createMap:function(t,e,a,r){this.createMtlMap(t,e,a,r),this.visualizeData(t,r)},createMtlMap:function(t,e,a,r){var n=x.a(this.mtlMapData,this.mtlMapData.objects.greaterMtl),i=(n.features.filter(function(t){return!0===t.properties.center})[0],d.geoPath().projection(this.projection));this.projection.translate([0,0]).scale(1);var s=i.bounds(this.stations),o=.95/Math.max((s[1][0]-s[0][0])/e,(s[1][1]-s[0][1])/a),l=[(e-o*(s[1][0]+s[0][0]))/2,(a-o*(s[1][1]+s[0][1]))/2];this.projection.scale(o).translate(l),d.select("#"+t).append("svg").attr("class","svg-map-wrapper").attr("width",e).attr("height",a).append("g").style("stroke-width","1.5px").append("path").datum(n).attr("class","feature").attr("d",i).style("fill","#b3b3b31a")},makeClockFace:function(t,e){var a=Math.round(2),r=Math.round(4),n=t.append("svg").attr("class","clock").attr("width",50).attr("height",50);n.selectAll(".hour-thick").data(d.range(0,12)).enter().append("line").attr("class",function(t){return t%3==0?"quarter hour-thick face":"regular hour-thick face"}).attr("x1",25).attr("y1",4).attr("x2",25).attr("y2",function(t){return t%3==0?4+r:4+a}).attr("transform",function(t){return"rotate("+5*t*6+",25,25)"}),n.selectAll("line.hand").data([e]).enter().append("line").attr("class","hour hand").attr("x1",25).attr("y1",function(t){return 25+Math.round(2)}).attr("x2",25).attr("y2",function(t){return 20-Math.round(9)}).attr("transform",function(t){return"rotate("+t%12*30+",25,25)"})},visualizeData:function(t,e){var a=d.select("#"+t).select("svg");this.makeClockFace(a,e);var r=this;this.stations.features=this.stations.features.map(function(t){var e=r.projection([t.properties.coordinates.lng,t.properties.coordinates.lat]);return t.properties.x=t.properties.cx=e[0],t.properties.y=t.properties.cy=e[1],t}),d.select("#"+t).select("svg").select("g").selectAll("station-data").data(this.stations.features).enter().append("circle").attr("class","station-data").attr("r",function(t){var a=t.properties.populartimes.filter(function(t){return t.name===r.days[r.day].name})[0];return r.scaleR(a.data[e])}).attr("transform",function(t){return"translate("+t.properties.cx+", "+t.properties.cy+")"}).attr("fill",function(t){return 1==t.properties.lines.length?r.color(t.properties.lines[0]):"black"}).attr("opacity",.25)}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"multilpe-maps-wrapper"},[a("nav",{class:{hidden:t.panelIsHidden},attrs:{id:"sidebar"}},[a("div",{staticClass:"input-params"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.day,expression:"day"}],staticClass:"form-control",attrs:{id:"day"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.day=e.target.multiple?a:a[0]}}},t._l(t.days,function(e){return a("option",{domProps:{value:e.value}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),t._v(" "),a("div",{staticClass:"range-time"},[a("div",{staticClass:"range-start"},[a("label",[t._v("De")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.startHour,expression:"startHour"}],staticClass:"form-control",attrs:{id:"start-time"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.startHour=e.target.multiple?a:a[0]}}},t._l(t.hours,function(e){return a("option",{domProps:{value:e.value}},[t._v("\n              "+t._s(e.name)+"\n            ")])}))]),t._v(" "),a("div",{staticClass:"range-end"},[a("label",[t._v("À")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.endHour,expression:"endHour"}],staticClass:"form-control",attrs:{id:"end-time"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.endHour=e.target.multiple?a:a[0]}}},t._l(t.hours,function(e){return a("option",{domProps:{value:e.value}},[t._v("\n              "+t._s(e.name)+"\n            ")])}))])])]),t._v(" "),a("hr",{staticClass:"separator"}),t._v(" "),a("div",{staticClass:"legend-wrapper"},[a("div",[t._v("Les cercles sont proportionnels au taux de fréquentation")]),t._v(" "),a("legend-view")],1)]),t._v(" "),a("div",{attrs:{id:"content"}},[a("div",{staticClass:"map-controls"},[a("div",{attrs:{id:"sidebarCollapse"},on:{click:function(e){t.panelIsHidden=!t.panelIsHidden}}},[a("span",[t.panelIsHidden?t._e():a("i",{staticClass:"fa fa-angle-double-left fa-3x"})]),t._v(" "),a("span",[t.panelIsHidden?a("i",{staticClass:"fa fa-angle-double-right fa-3x"}):t._e()])])]),t._v(" "),a("div",{ref:"mapsWrapper",staticClass:"maps-wrapper"})])])},staticRenderFns:[]};var j=a("VU/8")(H,D,!1,function(t){a("1kwl")},null,null).exports,P=function(t){if(isNaN(t))return!1;var e=parseFloat(t);return(0|e)===e},Z={name:"",data:function(){return{data:"",data_process:"",popularTimes:""}},mounted:function(){this.load_data(this)},methods:{load_data:function(t){var e={monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6,sunday:7};d.text("/static/data/metro_matrix.csv",function(a){t.data=d.csvParseRows(a),d.json("/static/data/pt_metro.json",function(a){t.popularTimes=a,function(){var a,r;for(t.data_process=[],a=0;a<27;a++)for(r=0;r<24;r++)if(t.data[r][a]){var n=t.popularTimes.filter(function(e){return e.name==t.data[r][a].replace(/\\u[\dA-F]{4}/gi,function(t){return String.fromCharCode(parseInt(t.replace(/\\u/g,""),16))})})[0];if(n){var i,s;for(n.i=a,n.j=r,n.populartimes.sort(function(t,a){var r=t.name.toLowerCase(),n=a.name.toLowerCase();return e[r]>e[n]}),n.flat_data=[],i=0;i<n.populartimes.length;i++)for(s=0;s<n.populartimes[i].data.length;s++)n.flat_data.push({value:n.populartimes[i].data[s],i:i,j:s});t.data_process.push(n)}}}(),t.generateMap(t)})})},generateMap:function(t){var e=d.scaleLinear().domain([0,100]).range(["#EEE","red"]),a=d.select("#grid").append("svg").attr("id","svg").attr("width",972).attr("height",840).attr("transform","translate(0,60)");a.append("svg:image").attr("x",-9).attr("y",-12).attr("width",500).attr("height",540).attr("xlink:href","/static/data/mtl.png").attr("opacity",.1).attr("transform","translate(-1130,-1130) scale(5.3)");a.selectAll("g").data(t.data_process).enter().append("g").attr("id",function(t){return t.name}).each(function(t){var a=t.i,r=t.j,n=t.name;d.select(this).selectAll("rect").data(t.flat_data).enter().append("rect").attr("class",function(t){return"rect_"+n}).attr("id",function(t){return"day-"+(t.i+1)+" hour-"+(t.j+1)}).attr("width",1.5).attr("height",5).attr("x",function(t){return 1.5*(t.j+24*a)}).attr("y",function(t){return 5*(t.i+7*r)}).attr("fill",function(t){return e(t.value)}).attr("stroke","#FFF").attr("stroke-width",.27).attr("stroke-opacity",.7)})}}},E={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"overview-wrapper"},[e("section",{attrs:{id:"grid"}})])}]};var z=a("VU/8")(Z,E,!1,function(t){a("m8l+")},"data-v-6a64ee04",null).exports,I={name:"CircleGenerator",data:function(){return{quantity:1,circles:0}},mounted:function(){},methods:{createCircles:function(t){if(P(this.quantity)){var e=0;for(e=0;e<this.quantity;e++)this.generateRandomCircle()}else alert("Valeur incorrecte")},generateRandomCircle:function(){var t=500*Math.random(),e=500*Math.random();d.select("svg").append("circle").attr("cx",function(){return t}).attr("cy",function(){return e}).attr("r",function(){return 10*Math.random()+10}).attr("fill",function(){return t>e+10&&t+e<490?"orange":t>e+10&&t+e>510?"blue":t<e-10&&t+e<490?"purple":t<e-10&&t+e>510?"green":"black"}),this.update()},update:function(){this.circles=d.selectAll("circle").size()},deleteCircles:function(){if(this.circles<1)alert("Aucun circle a supprimer");else{window.confirm("Souhaitez-vous supprimer tous les circles?");d.selectAll("circle").remove(),this.update()}}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),a("main",[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],attrs:{id:"quantity",type:"number",placeholder:"Quantité",min:"1"},domProps:{value:t.quantity},on:{input:function(e){e.target.composing||(t.quantity=e.target.value)}}}),t._v(" "),a("button",{staticClass:"green",attrs:{id:"create-circles-button"},on:{click:t.createCircles}},[t._v("Créer")])]),t._v(" "),a("button",{staticClass:"red",attrs:{id:"delete-circles-button"},on:{click:t.deleteCircles}},[t._v("Effacer")]),t._v(" "),a("p",{staticClass:"pull-right"},[t._v("Nombre de cercles: "),a("strong",{attrs:{id:"circles-count"}},[t._v(t._s(t.circles))])]),t._v(" "),a("svg")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h1",[this._v("Générateur de cercles SVG")])])}]};var T=a("VU/8")(I,F,!1,function(t){a("evez")},"data-v-399831dc",null).exports,$={name:"LineChart",data:function(){return{data:[99,71,78,25,36,92],line:""}},mounted:function(){this.calculatePath()},methods:{getScales:function(){var t=d.scaleTime().range([0,430]),e=d.scaleLinear().range([210,0]);return d.axisLeft().scale(t),d.axisBottom().scale(e),t.domain(d.extent(this.data,function(t,e){return e})),e.domain([0,d.max(this.data,function(t){return t})]),{x:t,y:e}},calculatePath:function(){var t=this.getScales(),e=d.line().x(function(e,a){return t.x(a)}).y(function(e){return t.y(e)});this.line=e(this.data)}}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{width:"500",height:"270"}},[e("g",{staticStyle:{transform:"translate(0, 10px)"}},[e("path",{attrs:{d:this.line}})])])},staticRenderFns:[]};var V=a("VU/8")($,R,!1,function(t){a("p9WZ")},"data-v-2d6c2f19",null).exports;r.a.use(c.a);var N=new c.a({routes:[{path:"/",name:"Home",component:A},{path:"/multiple-maps",name:"MultipleMaps",component:j},{path:"/overview",name:"Overview",component:z},{path:"/circlegenerator",name:"CircleGenerator",component:T},{path:"/linechart",name:"LineChart",component:V}]}),W=a("Ti88"),O=a.n(W);r.a.use(O.a),r.a.config.productionTip=!1,new r.a({el:"#app",router:N,components:{App:l},template:"<App/>"})},"SO/L":function(t,e){},evez:function(t,e){},"m8l+":function(t,e){},p9WZ:function(t,e){},sV89:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.610d644772b711b5fefe.js.map